<!DOCTYPE html>
<html lang="en">
<head>
        <title>Canvas Indexed Color</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../../../../theme/css/main.css" type="text/css" />
                <link href="http://localhost/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Pelican Test Site Atom Feed" />
                        <link href="http://localhost/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Pelican Test Site RSS Feed" />
        
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../../../../css/ie.css"/>
                <script src="../../../../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../../../../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
<a href="https://github.com/mwcz">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="../../../../">Pelican Test Site </a></h1>
                <nav><ul>
                                                                                                    <li class="active"><a href="../../../../category/misc.html">misc</a></li>
                                </ul></nav>
        </header><!-- /#banner -->
        <section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="../../../../2012/07/03/canvas-indexed-color/" rel="bookmark"
           title="Permalink to Canvas Indexed Color">Canvas Indexed Color</a></h1>
          </header>

    <div class="entry-content">
      <footer class="post-info">
        <abbr class="published" title="2012-07-03T23:44:50">
                Tue 03 July 2012
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../../../../author/mwcz.html">mwcz</a>
        </address>
        <p>In <a href="../../../../category/misc.html">misc</a>. </p>

</footer><!-- /.post-info -->      <p><a href="/projects/canvas_indexed_color" title="Canvas Indexed Color demo">Canvas Indexed Color demo</a></p>
<p><img alt="White SVG Tiger" src="/img/021/hahatiger.png" /></p>
<p>First, I converted the classic SVG tiger into a set of canvas drawing
instructions using <a href="http://professorcloud.com/svg-to-canvas/" title="Professor Cloud's conversion
tool">Professor Cloud's conversion
tool</a>.  The output looks like
<a href="https://github.com/mwcz/mwcz/blob/master/blog/projects/canvas_indexed_color/vector_images.js" title="Tiger image">this</a>.  Each call to <code>cvm.getColor()</code> used to be a string literal.  </p>
<p>Vim's regex saved me from having to edit <em>100,000</em> lines of canvas instructions
by hand to replace the color strings.</p>
<p>The demo uses <a href="http://knockoutjs.com/" title="Knockout JS">Knockout</a> for handling all
the update/draw events as well as updating the URL hash.  Check the <a href="https://github.com/mwcz/mwcz/blob/master/blog/projects/canvas_indexed_color/cic.js" title="source code">source
code</a> and you'll see that there <em>isn't</em> a vast tangled nest of event
wirings.  Each time one of the colors in this ViewModel is changed, Knockout
automatically triggers the canvas redraw and the updates the URL with the new
palette.  Conversely, if the URL is changed, the ViewModel will update itself
with the new value.  Knockout calls this a "two-way data binding".  </p>
<p>I replaced the aforementioned color strings with calls to <code>cvm</code>, which is a
Knockout ViewModel (in this case, an object that holds all the color data).
<code>cvm</code> is populated with the SVG tiger's default colors.</p>
<p>$$code(lang=javascript)
    ko.observableArray( [
        { hex: ko.observable("#000000") },
        { hex: ko.observable("#323232") },
        // .... many more ....
        { hex: ko.observable("#ff727f") },
        { hex: ko.observable("#ffffff") }
    ]);
$$/code</p>
<p>Play with the colors, then copy the URL and send your tiger to your friends.  :]</p>
<p><a href="/projects/canvas_indexed_color/#4c0000,#659900,#666666,#992600,#999999,#99cc32,#a51926,#a5264c,#b23259,#b26565,#b2b2b2,#cc3f4c,#cc7226,#cccccc,#e5668c,#e59999,#e5e5b2,B5E8E6,#ea8c4d,#ea8e51,#eb955c,#ec9961,#eea575,#efaa7c,#f1b288,#f2b892,#f3bf9c,#f4c6a8,#f5ccb0,#f8d8c4,#f8dcc8,#f9e2d3,#fae5d7,#fcf2eb,#ff727f,#ffffcc,#ffffff,#000000,#323232" title="Crazy tiger">Crazy tiger</a>.</p>
<p>Please note, this is only a simulation of an indexed color palette.  It is not
a true, usable, indexed-color API for canvas (someday, maybe!).</p>
<p>The color picker is <a href="https://github.com/mattfarina/farbtastic" title="Farbtastic">Farbtastic</a>.  If you're interested in reading more about the history of
indexed color, and a <strong>mind-blowing</strong> canvas demo, go
<a href="http://www.effectgames.com/effect/article.psp.html/joe/Old_School_Color_Cycling_with_HTML5" title="Color cycling in HTML5 canvas">here</a>.</p>
    </div><!-- /.entry-content -->
        <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "2012/07/03/canvas-indexed-color/";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://mwcz.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>
    
  </article>
</section>
        <section id="extras" class="body">
                        <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                                                    <li><a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a></li>
                                                    <li><a href="http://python.org">Python.org</a></li>
                                                    <li><a href="http://jinja.pocoo.org">Jinja2</a></li>
                                                    <li><a href="#">You can modify those links in your config file</a></li>
                                                </ul>
                </div><!-- /.blogroll -->
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://localhost/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                                                        <li><a href="http://localhost/feeds/all.rss.xml" type="application/rss+xml" rel="alternate">rss feed</a></li>
                            
                                                    <li><a href="https://github.com/mwcz">GitHub</a></li>
                                                    <li><a href="https://twitter.com/mwcz">Twitter</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'mwcz';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>